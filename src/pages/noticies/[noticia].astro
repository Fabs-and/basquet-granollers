---
import { COMMON_FIELDS, NEWS_CATEGORY_ID } from "@data/globalConstants";
import PageLayout from "@layouts/PageLayout.astro";
import { fetchPostsInCategories } from "@utils/apiFunctions";

export async function getStaticPaths() {
  //If got from apiDAta.ts i only received 10 news
 const allNews = await fetchPostsInCategories(
    [NEWS_CATEGORY_ID],
    ["categories", ...COMMON_FIELDS],
    100,
  );
  return allNews.map((noticia) => {
    return {
      params: { noticia: noticia.slug },
      props: {
        title: noticia.title.rendered,
        content: noticia.content.rendered,
        date: noticia.date,
        image: noticia.image,
      },
    };
  });
}

const noticia = Astro.props;

---


<PageLayout isPost={true} post={noticia} pageTitle={noticia.title.rendered}/>

