---
// Import utils
import {
  fetchPostsInCategory,
} from "@utils/apiFunctions/index";

// Import types
import type { Post } from "@utils/apiFunctions/index";

import PageLayout from "@layouts/PageLayout.astro";

// const { noticia} = Astro.params;
// const noticiesfromWP = await fetchPostsInCategory(19, ['title', 'content', 'image', 'slug', 'date']);
// const post = noticiesfromWP.find((post) => post.slug === noticia);
// if (!post) return Astro.redirect("/404");

export async function getStaticPaths() {
  const noticies = await fetchPostsInCategory(19,  ['title', 'content', 'image', 'slug', 'date']);

  return noticies.map((noticia: Post) => {
    return {
      params: { noticia: noticia.slug },
      props: {
        title: noticia.title.rendered,
        content: noticia.content.rendered,
        date: noticia.date,
        image: noticia.image,
      },
    };
  });
}

const noticia = Astro.props;

---


<PageLayout isPost={true} post={noticia} pageTitle={noticia.title.rendered}/>

