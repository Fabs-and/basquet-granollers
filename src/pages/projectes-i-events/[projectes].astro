---
// Import utils
import { fetchPostsInCategory } from "@utils/apiFunctions/index";

// Import types
import type { Post } from "@utils/apiFunctions/types";

// Import Layouts
import PageLayout from "@layouts/PageLayout.astro";

// const { projectes} = Astro.params;
// const projectesFromWP =  await fetchPostsInCategory(42, ['title', 'content', 'image', 'slug', 'date']);
// const project = projectesFromWP.find((project) => project.slug === projectes);
// if (!project) return Astro.redirect("/404");

export async function getStaticPaths() {
  const projects = await fetchPostsInCategory(42,  ['title', 'content', 'image', 'slug', 'date']);

  return projects.map((project: Post) => {
    return {
      params: { projectes: project.slug },
      props: {
        title: project.title.rendered,
        content: project.content.rendered,
        date: project.date,
        image: project.image,
      },
    };
  });
}

const project = Astro.props;

---

  <PageLayout post={project} pageTitle={project.title.rendered} />

