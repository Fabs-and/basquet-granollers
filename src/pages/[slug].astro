---
// Import utils
import { fetchAllPosts } from '@utils/api/apiService';

// Import types
import type { Post } from 'src/types';

// Import Layouts
import BaseLayout from '@layouts/BaseLayout.astro';
import PostLayout from '@layouts/PostLayout.astro';
import { postFields } from 'src/apiGlobalConsts';

export async function getStaticPaths() {
  const posts = await fetchAllPosts(50, postFields);

  return posts.map((post: Post) => {
    return {
      params: { slug: post.slug },
      props: {
        title: post.title.rendered,
        content: post.content.rendered,
      },
    };
  });
}

const post = Astro.props;
---

<BaseLayout pageTitle={post.title}>
  <PostLayout {post} />
</BaseLayout>

