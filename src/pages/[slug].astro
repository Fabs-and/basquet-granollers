---
// Import utils
import { getFromAPI } from '@utils/api';

// Import types
import { Endpoints, Post} from 'src/types';

// Import Layouts
import BaseLayout from '@layouts/BaseLayout.astro';
import PostLayout from '@layouts/PostLayout.astro';
import { postFields } from '@utils/apiGlobalParams';

export async function getStaticPaths() {
  const posts = await getFromAPI(Endpoints.posts, postFields, 50);

  return posts.map((post: Post) => {
    return {
      params: { slug: post.slug },
      props: {
        title: post.title.rendered,
        content: post.content.rendered,
      },
    };
  });
}

const post = Astro.props;
---

<BaseLayout pageTitle={post.title}>
  <PostLayout {post} />
</BaseLayout>
