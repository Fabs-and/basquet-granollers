---
import { bottomHeaderLinks } from "src/data/header";
import { logo } from "@assets/logo";
import { collapsibleArrowHeader, magnifyingGlass } from "@assets/icons";
---

<script>
  function handleClick() {
    let div = this.querySelector(".rotate");
    div.classList.toggle(".rotated");
  }
  let buttons = document.querySelectorAll("button");

  buttons.forEach(function (button) {
    // Add the event listener to each button
    button.addEventListener("click", handleClick);
  });
</script>

<a
  class="logo"
  title="Club Bàsquet Granollers Logo"
  aria-label="Club Bàsquet Granollers Logo"
  href="/"><Fragment set:html={logo} /></a
>


 <nav class="nav">
  <ul>
    {
      bottomHeaderLinks.map((category) => (
        <li>
          {category.title ? (
            <button>{category.title.toUpperCase()}<div class="rotate"><Fragment set:html={collapsibleArrowHeader} /></div></button>
          ) : (
            <a href={category.slug}>{category.name!.toUpperCase()}</a>
          )}
        </li>
      ))
    }
  </ul>

</nav>

<div class="history-search-container">
  <a href="" class="button">
    {`La història`.toUpperCase()}
  </a>
  <div class="search-icon">
    <Fragment set:html={magnifyingGlass} />
  </div>
</div>

<style>
  .logo {
    position: absolute;
    bottom: 4px;
    left: var(--padding-inline);
  }

  button:hover {
    color: var(--clr-accent);
  }
  .history-search-container {
    position: absolute;
    display: flex;
    right: var(--padding-inline);
    bottom: 50%;
    transform: translateY(50%);
    gap: 0.94rem;
  }

  .search-icon {
    align-self: center;
  }

  .search-icon:hover {
    cursor: pointer;
  }
  .rotate {
    display: inline-block;
    transform: rotate(0);
    transform-origin: 60% 45%;
    transition: 0.45s transform ease-in-out;
  }

  .rotated {
    transform: rotate(-180deg);
  }

  ul {
    min-height: var(--bottom-header-hg);
    display: flex;
    gap: 2rem;
    align-items: center;
    color: var(--clr-primary);
    font-weight: var(--font-weight-bold);
    padding-left: 12.4rem;
  }

  a {
    color: var(--clr-primary);
  }

  .button {
    text-decoration: none;
    display: grid;
    place-items: center;
    height: 2.6875rem;
    width: 8.8125rem;
    border-radius: 1.75rem;
    color: inherit;
    background-color: var(--clr-primary);
    font-weight: 500;
    transition:
      background-color 0.1s ease-in-out,
      font-weight 0.1s ease-in-out;
  }

  .button:hover {
    background-color: var(--clr-accent);
    font-weight: 560;
  }
</style>
