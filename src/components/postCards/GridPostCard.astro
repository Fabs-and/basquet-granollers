---
// Import types
// import { Endpoints, CategoryFields } from 'src/types';
// import type { Category, Post } from 'src/types';

// Import components
import PostCard from "@components/postCards/PostCard.astro";

// Import api functions from utils
import { fetchAllCategories } from "fetch-wordpress-api";

import type {
  Endpoints,
  CategoryFields,
  Category,
  Post,
} from "fetch-wordpress-api";
// Import utils functions
import { categoryMapper } from "@utils/helperFunctions";

const { posts, allCategories } = Astro.props as {
  posts: Post[];
  allCategories: Category[];
};

const firstPost = posts.at(0);
const isFirstPost = true;
---

<section class="noticies-container">
  <h2>CBG Not√≠cies</h2>
  <div class="postCard-container">
      <PostCard
          post={firstPost}
          postCategories={categoryMapper(allCategories, firstPost!.categories)}
          {isFirstPost}
        />
    {
      posts.map((post: Post) => (
        <PostCard
          {post}
          postCategories={categoryMapper(allCategories, post.categories)}
        />
      ))
    }
  </div>
</section>

<style>
  section.noticies-container {
    background-color: var(--clr-contrast);
    color: var(--clr-primary);
  }

  div.postCard-container {
    display: flex;
    padding-inline: var(--padding-inline);
    padding-block: 2rem;
  }
</style>
